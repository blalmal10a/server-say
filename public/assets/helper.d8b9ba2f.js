import{d as u}from"./date.8a89e92a.js";import{F as m,ae as d,ah as r}from"./index.0c2a45f0.js";const e=m({selecteDate:void 0,showAddEditForm:!1,loadingTable:!1,loadingSubmitButton:!1,is_executive:!1,selectedTag:"Meeting",list:[],users:[],selectedList:[],pagination:{descending:!0,rowsPerPage:15,rowsNumber:0,page:0,is_executive:!1},columns:p(),form_columns:b(),form:_(),create:v,update:x,getList:f,reset:h,save:g});async function g(t,s){var o,l,c,a;let i=t.params.id;(o=t.query.executive)!=null,e.loadingTable=!0,e.loadingSubmitButton=!0;try{const n=await d.request({url:i!="add"?`attendances/${i}`:"attendances",method:i!="add"?"patch":"post",data:{attend_list:e.selectedList,tag:e.selectedTag,date:e.selecteDate,is_executive:e.is_executive},params:{...e.pagination}});e.list=n.data.data,e.pagination.rowsNumber=n.data.total,e.showAddEditForm=!1,e.pagination.is_executive=e.is_executive,s.push({name:"attendances"})}catch(n){console.error(n.message),r.create((a=(c=(l=n.response)==null?void 0:l.data)==null?void 0:c.message)!=null?a:n==null?void 0:n.message)}e.loadingTable=!1,e.loadingSubmitButton=!1}async function f(t){var s,i,o,l,c,a;e.loadingTable=!0;try{t&&(e.pagination=t.pagination);const n=await d.get("attendances",{params:e.pagination});e.list=(i=(s=n.data)==null?void 0:s.data)!=null?i:[],e.pagination.rowsNumber=(o=n.data)==null?void 0:o.total}catch(n){console.error(n.message),r.create((a=(c=(l=n.response)==null?void 0:l.data)==null?void 0:c.message)!=null?a:n==null?void 0:n.message)}e.loadingTable=!1}function p(){return[{label:"Date",name:"date",align:"left",field:t=>u.formatDate(t.date,"Do MMM, 'YY")},{label:"Att.",name:"no_of_attendant",align:"left",field:t=>{var s;return(s=t.no_of_attendant)!=null?s:"N/A"}},{name:"actions",label:""}]}function b(){return[{label:"name",name:"name",align:"left",field:t=>t.name},{label:"phone",name:"phone",align:"left",field:t=>t.phone}]}function _(){return{id:null,name:"",phone:"",corp:null}}function h(){e.form={id:null,name:"",phone:"",corp:null}}async function v(t){var s,i,o,l,c;try{const a=await d.get(`attendances/create?executive=${(s=t.query.executive)!=null?s:0}`);e.users=(i=a.data)!=null?i:[],e.is_executive=!!t.query.executive}catch(a){console.error(a.message),r.create((c=(l=(o=a.response)==null?void 0:o.data)==null?void 0:l.message)!=null?c:a==null?void 0:a.message)}}async function x(t){var s,i,o,l,c;try{const a=await d.get(`attendances/${t}/edit`);e.users=(s=a.data.users)!=null?s:[],e.selectedList=(i=a.data.attend_list)!=null?i:[],e.is_executive=a.data.is_executive}catch(a){console.error(a.message),r.create((c=(l=(o=a.response)==null?void 0:o.data)==null?void 0:l.message)!=null?c:a==null?void 0:a.message)}}export{e as a};
