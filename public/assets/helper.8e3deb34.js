import{d as u}from"./date.4199c5fc.js";import{J as g,af as c,aj as r}from"./index.d3ad043f.js";const e=g({selectedDate:void 0,showAddEditForm:!1,loadingTable:!1,loadingSubmitButton:!1,is_executive:!1,selectedTag:"Meeting",list:[],users:[],selectedList:[],pagination:{descending:!0,rowsPerPage:15,rowsNumber:0,page:0,is_executive:!1},columns:b(),form_columns:_(),form:h(),create:x,update:T,getList:p,reset:v,save:f,show:m});async function m(t,i){var n,l,o,d;try{e.loadingTable=!0;const a=await c.get(`attendances/${t.params._id}`);e.form=a.data,console.log(a.data),e.users=(n=a.data.users)!=null?n:[],e.is_executive=!!t.query.executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,r.create((d=(o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)!=null?d:a==null?void 0:a.message)}}async function f(t,i){var l,o,d,a;let n=t.params._id;(l=t.query.executive)!=null,e.loadingTable=!0,e.loadingSubmitButton=!0;try{const s=await c.request({url:n!="add"?`attendances/${n}`:"attendances",method:n!="add"?"patch":"post",data:{attend_list:e.selectedList,tag:e.selectedTag,date:e.selectedDate,is_executive:e.is_executive},params:{...e.pagination}});e.list=s.data.data,e.pagination.rowsNumber=s.data.total,e.showAddEditForm=!1,e.pagination.is_executive=e.is_executive,i.push({name:"attendances"})}catch(s){console.error(s.message),r.create((a=(d=(o=s.response)==null?void 0:o.data)==null?void 0:d.message)!=null?a:s==null?void 0:s.message)}e.loadingTable=!1,e.loadingSubmitButton=!1}async function p(t){var i,n,l,o,d,a;e.loadingTable=!0;try{t&&(e.pagination=t.pagination);const s=await c.get("attendances",{params:e.pagination});e.list=(n=(i=s.data)==null?void 0:i.data)!=null?n:[],e.pagination.rowsNumber=(l=s.data)==null?void 0:l.total}catch(s){console.error(s.message),r.create((a=(d=(o=s.response)==null?void 0:o.data)==null?void 0:d.message)!=null?a:s==null?void 0:s.message)}e.loadingTable=!1}function b(){return[{label:"Date",name:"date",align:"left",field:t=>u.formatDate(t.date,"Do MMM, 'YY")},{label:"Att.",name:"no_of_attendant",align:"left",field:t=>{var i;return(i=t.no_of_attendant)!=null?i:"N/A"}},{name:"actions",label:""}]}function _(){return[{label:"name",name:"name",align:"left",field:t=>t.name},{label:"phone",name:"phone",align:"left",field:t=>t.phone}]}function h(){return{id:null,name:"",phone:"",corp:null}}function v(){e.form={id:null,name:"",phone:"",corp:null}}async function x(t){var i,n,l,o,d;try{e.loadingTable=!0;const a=await c.get(`attendances/create?executive=${(i=t.query.executive)!=null?i:0}`);e.users=(n=a.data)!=null?n:[],e.is_executive=!!t.query.executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,console.error(a.message),r.create((d=(o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)!=null?d:a==null?void 0:a.message)}}async function T(t){var i,n,l,o,d;try{e.loadingTable=!0;const a=await c.get(`attendances/${t}/edit`);e.users=(i=a.data.users)!=null?i:[],e.selectedList=(n=a.data.attend_list)!=null?n:[],e.is_executive=a.data.is_executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,console.error(a.message),r.create((d=(o=(l=a.response)==null?void 0:l.data)==null?void 0:o.message)!=null?d:a==null?void 0:a.message)}}export{e as a};
