import{Q as _}from"./QInput.7e27db63.js";import{Q as g,c as w,b as v,_ as D}from"./ConfirmDelete.041abbd4.js";import{Q as M}from"./QDate.d9649e7c.js";import{ae as b,r as Q,f as V,N as Y,o as y,P as T,Q as k,R as n,S as l,T as a,U as o,V as c}from"./index.d3ad043f.js";import{Q as C}from"./QPage.7bf2ba30.js";import{a as e}from"./helper.8e3deb34.js";import{d as r}from"./date.4199c5fc.js";import"./QCardActions.79877e99.js";import"./use-quasar.f628857e.js";import"./format.59a25017.js";import"./use-transition.5f5ddb9c.js";const L={class:"full-width"},R={class:"row q-col-gutter-sm"},U={class:"col-12 col-sm-6 col-md-4"},$={class:"col-12 col-sm-6 col-md-4"},B={class:"col-12 col-sm-6 col-md-4"},N={class:"row justify-center"},h={class:"col-12 col-sm-6 col-md-4"},H={__name:"AttendanceForm",setup(x){const d=b(),m=Q(null),u=V(()=>e.is_executive?(e.selectedTag="Council",["Council","Activity"]):(e.selectedTag="Meeting",["Meeting","Activity"]));Y(()=>{e.users=[],e.selectedList=[],r.formatDate(new Date,"ddd")=="Mon"&&(e.selectedTag="Monday")}),y(async()=>{d.params._id=="add"?(await e.create(d),e.selectedDate=r.formatDate(new Date,"YYYY-MM-DD")):await e.update(d.params._id,d)});function f(i,t){const s=e.selectedList.findIndex(p=>p._id==t._id);s>=0?e.selectedList.splice(s,1):e.selectedList.push(t)}return(i,t)=>(T(),k(C,{class:"",padding:""},{default:n(()=>[l(v,{ref_key:"tableRef",ref:m,square:"",flat:"",bordered:"",filter:o(e).pagination.filter,selection:"multiple",onRowClick:f,loading:o(e).loadingTable,rows:o(e).users,columns:o(e).form_columns,"rows-per-page-options":[0],"hide-pagination":"",class:"full-width",selected:o(e).selectedList,"onUpdate:selected":t[5]||(t[5]=s=>o(e).selectedList=s),"row-key":"_id"},{top:n(()=>[a("div",L,[a("div",R,[a("div",U,[l(_,{dense:"",outlined:"",modelValue:o(e).pagination.filter,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).pagination.filter=s),label:"Search"},null,8,["modelValue"])]),a("div",$,[l(g,{dense:"",outlined:"",options:u.value,modelValue:o(e).selectedTag,"onUpdate:modelValue":t[1]||(t[1]=s=>o(e).selectedTag=s)},null,8,["options","modelValue"])]),a("div",B,[l(c,{"no-caps":"",class:"full-width",label:o(r).formatDate(o(e).selectedDate,"Do MMM, YYYY"),color:"primary"},{default:n(()=>[l(w,{ref:"date_menu_ref",fit:""},{default:n(()=>[a("div",N,[l(M,{mask:"YYYY-MM-DD",flat:"",modelValue:o(e).selectedDate,"onUpdate:modelValue":[t[2]||(t[2]=s=>o(e).selectedDate=s),t[3]||(t[3]=s=>i.$refs.date_menu_ref.hide())],minimal:""},null,8,["modelValue"])])]),_:1},512)]),_:1},8,["label"])]),a("div",h,[l(c,{class:"full-width",onClick:t[4]||(t[4]=s=>o(e).save(i.$route,i.$router)),label:"save",color:"primary"})])])])]),_:1},8,["filter","loading","rows","columns","selected"]),l(D,{onUpdateTable:t[6]||(t[6]=s=>{o(e).list=s.data,o(e).pagination.rowsNumber=s.total})})]),_:1}))}};export{H as default};
