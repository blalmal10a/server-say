import{d as u}from"./date.2b7f0fb9.js";import{F as g,ae as d,ah as r}from"./index.45c30311.js";const e=g({selecteDate:void 0,showAddEditForm:!1,loadingTable:!1,loadingSubmitButton:!1,is_executive:!1,selectedTag:"Meeting",list:[],users:[],selectedList:[],pagination:{descending:!0,rowsPerPage:15,rowsNumber:0,page:0,is_executive:!1},columns:h(),form_columns:_(),form:v(),create:x,update:T,show:m,update_collection:f,getList:b,reset:y,save:p});async function m(t,c){var s,i,o,n;try{e.loadingTable=!0;const a=await d.get(`attendances/${t.params.id}`);e.form=a.data,console.log(a.data),e.users=(s=a.data.users)!=null?s:[],e.is_executive=!!t.query.executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,r.create((n=(o=(i=a.response)==null?void 0:i.data)==null?void 0:o.message)!=null?n:a==null?void 0:a.message)}}async function f(t,c){var s,i,o;try{e.loadingSubmitButton=!0;const n=await d.patch(`attendances/${t.params.id}/collection`,{collection:parseFloat(e.collection)});e.loadingSubmitButton=!1,c.push({name:"attendances"})}catch(n){e.loadingSubmitButton=!1,r.create((o=(i=(s=n.response)==null?void 0:s.data)==null?void 0:i.message)!=null?o:n.message)}}async function p(t,c){var i,o,n,a;let s=t.params.id;(i=t.query.executive)!=null,e.loadingTable=!0,e.loadingSubmitButton=!0;try{const l=await d.request({url:s!="add"?`attendances/${s}`:"attendances",method:s!="add"?"patch":"post",data:{attend_list:e.selectedList,tag:e.selectedTag,date:e.selecteDate,is_executive:e.is_executive},params:{...e.pagination}});e.list=l.data.data,e.pagination.rowsNumber=l.data.total,e.showAddEditForm=!1,e.pagination.is_executive=e.is_executive,c.push({name:"attendances"})}catch(l){console.error(l.message),r.create((a=(n=(o=l.response)==null?void 0:o.data)==null?void 0:n.message)!=null?a:l==null?void 0:l.message)}e.loadingTable=!1,e.loadingSubmitButton=!1}async function b(t){var c,s,i,o,n,a;e.loadingTable=!0;try{t&&(e.pagination=t.pagination);const l=await d.get("attendances",{params:e.pagination});e.list=(s=(c=l.data)==null?void 0:c.data)!=null?s:[],e.pagination.rowsNumber=(i=l.data)==null?void 0:i.total}catch(l){console.error(l.message),r.create((a=(n=(o=l.response)==null?void 0:o.data)==null?void 0:n.message)!=null?a:l==null?void 0:l.message)}e.loadingTable=!1}function h(){return[{label:"Date",name:"date",align:"left",field:t=>u.formatDate(t.date,"Do MMM, 'YY")},{label:"Att.",name:"no_of_attendant",align:"left",field:t=>{var c;return(c=t.no_of_attendant)!=null?c:"N/A"}},{name:"actions",label:""}]}function _(){return[{label:"name",name:"name",align:"left",field:t=>t.name},{label:"phone",name:"phone",align:"left",field:t=>t.phone}]}function v(){return{id:null,name:"",phone:"",corp:null}}function y(){e.form={id:null,name:"",phone:"",corp:null}}async function x(t){var c,s,i,o,n;try{e.loadingTable=!0;const a=await d.get(`attendances/create?executive=${(c=t.query.executive)!=null?c:0}`);e.users=(s=a.data)!=null?s:[],e.is_executive=!!t.query.executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,console.error(a.message),r.create((n=(o=(i=a.response)==null?void 0:i.data)==null?void 0:o.message)!=null?n:a==null?void 0:a.message)}}async function T(t){var c,s,i,o,n;try{e.loadingTable=!0;const a=await d.get(`attendances/${t}/edit`);e.users=(c=a.data.users)!=null?c:[],e.selectedList=(s=a.data.attend_list)!=null?s:[],e.is_executive=a.data.is_executive,e.loadingTable=!1}catch(a){e.loadingTable=!1,console.error(a.message),r.create((n=(o=(i=a.response)==null?void 0:i.data)==null?void 0:o.message)!=null?n:a==null?void 0:a.message)}}export{e as a};
