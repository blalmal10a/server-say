import{Q as g,b as _,_ as w,C as h}from"./ConfirmDelete.ec59943c.js";import{c as b,f as C,h as q,C as x,r as Q,G as k,J as y,o as D,L as m,M as p,N as l,O as s,af as n,Q as e,R as c,P as f,X as v,ai as M,S as $,A,I as d}from"./index.0c2a45f0.js";import{Q as u}from"./QTd.36c0de6d.js";import{Q as T}from"./QPage.5f017c31.js";import{a as t}from"./helper.d8b9ba2f.js";import{d as V}from"./date.8a89e92a.js";import"./use-dark.f67fcd34.js";import"./format.310306ab.js";import"./QCardActions.6d0d9c99.js";import"./use-transition.9194294c.js";var B=b({name:"QTr",props:{props:Object,noHover:Boolean},setup(r,{slots:i}){const a=C(()=>"q-tr"+(r.props===void 0||r.props.header===!0?"":" "+r.props.__trClass)+(r.noHover===!0?" q-tr--no-hover":""));return()=>q("tr",{class:a.value},x(i.default))}});const N={class:"full-width"},z={class:"row q-col-gutter-sm"},E={class:"col-12 col-sm-6 col-md-4"},L={class:"col-6 col-sm-3 col-md-2"},P={class:"col-6 col-sm-3 col-md-2"},S={class:"q-pl-xs"},U={class:"row q-col-gutter-sm no-wrap"},H={class:"col-auto"},R={class:"col-auto"},Z={__name:"AttendancesPage",setup(r){return Q(null),k(()=>{t.list=[]}),y(()=>{t.list=[]}),D(async()=>{await t.getList()}),(i,a)=>(m(),p(T,{class:"",padding:""},{default:l(()=>[s(_,{loading:e(t).loadingTable,pagination:e(t).pagination,"onUpdate:pagination":a[4]||(a[4]=o=>e(t).pagination=o),onRequest:e(t).getList,square:"",flat:"",bordered:"",rows:e(t).list,columns:e(t).columns,class:"full-width"},{top:l(()=>[n("div",N,[n("div",z,[n("div",E,[s(g,{outlined:"",dense:"",style:{"min-height":"50px"},modelValue:e(t).pagination.is_executive,"onUpdate:modelValue":[a[0]||(a[0]=o=>e(t).pagination.is_executive=o),a[1]||(a[1]=o=>e(t).getList({pagination:e(t).pagination}))],"map-options":"","emit-value":"",options:[{value:!1,label:"Member"},{value:!0,label:"Executive"}]},null,8,["modelValue"])]),n("div",L,[s(c,{"no-caps":"",class:"full-width",label:"Member",color:"accent",icon:"add",title:"Add Attendance",onClick:a[2]||(a[2]=()=>{e(t).reset(),i.$router.push({name:"attendance-form",params:{id:"add"}})})})]),n("div",P,[s(c,{"no-caps":"",class:"full-width",color:"accent",icon:"new_label",title:"Executive Attendance",label:"Executive",onClick:a[3]||(a[3]=()=>{e(t).reset(),i.$router.push({name:"attendance-form",params:{id:"add"},query:{executive:1}})})})])])])]),body:l(o=>[s(B,{props:o},{default:l(()=>[s(u,{style:{position:"relative"}},{default:l(()=>[n("div",S,[f(v(e(V).formatDate(o.row.date,"Do MMM, 'YY"))+" ",1),o.row.tag=="Activity"?(m(),p(M,{key:0,class:"absolute-top-left q-pl-xs q-pt-xs",name:"star",size:"11px",color:"primary"})):$("",!0)])]),_:2},1024),s(u,{"auto-width":""},{default:l(()=>[f(v(o.row.no_of_attendant),1)]),_:2},1024),s(u,{"auto-width":""},{default:l(()=>[n("div",U,[n("div",H,[A(s(c,{round:"",onClick:()=>{i.$router.push({name:"attendance-form",params:{id:o.row.id}}),e(t).showAddEditForm=!0},color:"accent",size:i.$q.screen.lt.sm?"xs":"md",icon:"edit"},null,8,["onClick","size"]),[[h]])]),n("div",R,[s(c,{round:"",onClick:()=>{e(d).tempData={...o.row},e(d).tempData.title=`attendence on ${o.row.date}`,e(d).tempData.endpoint="attendances",e(d).showConfirmDeleteDialog=!0,e(d).pagination={...e(t).pagination}},color:"negative",size:i.$q.screen.lt.sm?"xs":"md",icon:"delete"},null,8,["onClick","size"])])])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["loading","pagination","onRequest","rows","columns"]),s(w,{onUpdateTable:a[5]||(a[5]=o=>{e(t).list=o.data,e(t).pagination.rowsNumber=o.total})})]),_:1}))}};export{Z as default};
