import{Q as g,b as i,a as v}from"./QPage.7bf2ba30.js";import{Q as c}from"./QInput.7e27db63.js";import{ad as w,r as p,P as Q,Q as y,R as o,T as l,S as a,V,af as m,_ as x}from"./index.d3ad043f.js";import{Q as b,k}from"./QCardActions.79877e99.js";import{b as q}from"./use-quasar.f628857e.js";const B={style:{"min-width":"min(500px, 100vw)"},class:"q-pa-md"},P=l("h3",{class:"q-ma-none text-center"},"LOGIN",-1),C={class:"row q-col-gutter-md"},S={class:"col-12"},I={class:"col-12"},N={class:"full-width q-px-sm"},F={__name:"LoginPage",setup(A){const f=q(),_=w(),u=p(!1),n=p({phone:"",password:""});async function h(){var d,s,t,r;try{u.value=!0;const e=await m.post("/auth/login",n.value);x.user=e.data.user,localStorage.setItem("token",(d=e.data)==null?void 0:d.token),m.defaults.headers.Authorization=`Bearer ${e.data.token}`,_.push({name:"home"}),u.value=!1}catch(e){u.value=!1,f.notify((r=(t=(s=e.response)==null?void 0:s.data)==null?void 0:t.message)!=null?r:e==null?void 0:e.message),console.log("error: ",e.message)}}return(d,s)=>(Q(),y(g,{class:"row justify-center",style:{"padding-top":"10vh"}},{default:o(()=>[l("div",B,[a(v,{class:"q-pa-lg"},{default:o(()=>[a(b,{onSubmit:h},{default:o(()=>[a(i,null,{default:o(()=>[P]),_:1}),a(i,null,{default:o(()=>[l("div",C,[l("div",S,[a(c,{autofocus:"",outlined:"",modelValue:n.value.phone,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value.phone=t),type:"text",label:"Phone"},null,8,["modelValue"])]),l("div",I,[a(c,{outlined:"",modelValue:n.value.password,"onUpdate:modelValue":s[1]||(s[1]=t=>n.value.password=t),type:"password",label:"Password"},null,8,["modelValue"])])])]),_:1}),a(k,null,{default:o(()=>[l("div",N,[a(V,{loading:u.value,type:"submit",style:{height:"50px"},class:"full-width",color:"primary",label:"login"},null,8,["loading"])])]),_:1})]),_:1})]),_:1})])]),_:1}))}};export{F as default};
